# =============================================================================
# AIVIUE BACKEND - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your values
#
# LOCAL DEVELOPMENT: Use this file as .env
# RAILWAY DEPLOYMENT: Set these as Railway service variables
# =============================================================================

# ===================== APP SETTINGS =====================
APP_NAME=aiviue-backend
APP_ENV=development          # development | production
DEBUG=true                   # true | false (set false in production)
API_VERSION=v1
SECRET_KEY=change-me-in-production   # Generate: openssl rand -hex 32
# Optional: ENCRYPTION_KEY for Aadhaar/PAN (defaults to SECRET_KEY). Required for storing Aadhaar/PAN.

# ===================== SERVER =====================
# Note: Railway injects PORT automatically, no need to set it there
HOST=0.0.0.0
PORT=8000

# ===================== DATABASE =====================
# PostgreSQL (Supabase)
# Format: postgresql+asyncpg://USER:PASSWORD@HOST:PORT/DATABASE
# 
# Supabase Connection Pooler (recommended for production):
#   postgresql+asyncpg://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
#
# Direct Connection (for migrations):
#   postgresql+asyncpg://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
DATABASE_URL=postgresql+asyncpg://postgres:your-password@db.your-project.supabase.co:5432/postgres

# ===================== REDIS =====================
# Local: redis://localhost:6379/0
# Railway: Use ${{Redis.REDIS_URL}} variable reference
REDIS_URL=redis://localhost:6379/0

# ===================== LLM - GOOGLE GEMINI =====================
# Get API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key
GEMINI_MODEL=gemini-2.5-flash

# ===================== CORS =====================
# Comma-separated list of allowed origins
# Local: http://localhost:3000,http://127.0.0.1:3000
# Production: https://your-frontend.up.railway.app
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ===================== LOGGING =====================
LOG_LEVEL=DEBUG              # DEBUG | INFO | WARNING | ERROR

# ===================== FEATURE FLAGS =====================
# Set to true when Screening Agent is ready to receive events
ENABLE_SCREENING_EVENTS=false

# ===================== SCREENING AGENT API =====================
# When set, POST /api/v1/screening/applications and GET /api/v1/screening/failed-requests
# require X-Api-Key: <value> header. Leave empty for open access (dev only).
# SCREENING_API_KEY=5524c9f5ffd406678352a0c1266b17b147afa616a36b7df5ac6c08fbdec4bbb4

# ===================== STORAGE (optional â€“ resume PDF upload) =====================
# Required for downloadable PDF when resume is created via Aivi bot (no file upload).
# Create a bucket named "resumes" in Supabase Storage and set it public if needed.
# SUPABASE_URL=https://tmsiadzyekqcqywtwkbx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
# SUPABASE_RESUME_BUCKET=resumes
# Allowed origins for resume PDF URLs (SSRF). If unset and SUPABASE_URL is set, that host is used.
# ALLOWED_PDF_ORIGINS=https://your-project.supabase.co
